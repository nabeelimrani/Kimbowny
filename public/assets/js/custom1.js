var currentUrl="{{ url()->current() }}";function loadcart(){ajaxcall("/loadCart",null,"post",(function(t){$("#sideCart").html(t.output),$("#total").html(t.total),$("#totalprice").html(t.totalprice),$("#headercarttotal").html(t.total)}))}function loadWishlist(){ajaxcall("/loadWishlist",null,"post",(function(t){$("#listwish").html(t.output),$("#countwish").html(t.total),$("#wishcout2").html(t.total)}))}function ajaxcall(t,e=null,a="post",o){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,method:a,data:e,dataType:"json",success:o,error:function(t,e,a){console.error(a)}})}function ChangeImage(t){document.getElementById("image-change").src=t}function showMessage(t){Swal.fire({icon:"success",title:t,showConfirmButton:!1,timer:1e3})}$(document).on("blur","#checkoutemail",(function(){ajaxcall("/checkEmail",{email:$(this).val()},"post",(function(t){1==t&&($("#returning").addClass("d-block"),$("#checkoutform input, #checkoutform select, #checkoutform textarea,#checkoutform button").prop("disabled",!0),Swal.fire({title:"Your are Already Registered With Our website please login to auto fill the information",showConfirmButton:!0}))}))})),$(document).on("change","#checkoutcountry",(function(){var t=$(this).val();if("Saudi Arabia"==t){var e=$("#shippingcheck").html(),a=($("#totalcheck").html(),$("#actualprice").html());$("#shippingcheck").html("AED : 30.00"),$("#totalcheck").html(parseInt(a)+30)}if("United Arab Emirates"==t){e=$("#shippingcheck").html(),$("#totalcheck").html(),a=$("#actualprice").html();"Free"!=e&&(parseInt(a)<100?($("#shippingcheck").html("AED : 10.00"),$("#totalcheck").html(parseInt(a)+10)):($("#shippingcheck").html("Free"),$("#totalcheck").html(a)))}ajaxcall("/getcities",{val:t},"post",(function(t){$("#checkoutcity").html(t.output)}))})),$(document).on("submit","#updateAccount",(function(t){t.preventDefault(),$("div[id*='error']").html("");var e=$(this);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:"/updateinfo",method:"post",dataType:"json",data:e.serializeArray(),error:function(t,e,a){return t.responseJSON&&t.responseJSON.errors&&$.each(t.responseJSON.errors,(function(t,e){$("#"+("error-"+t)).addClass("text-danger").html(e)})),!1},success:function(t){Swal.fire({position:"top-end",icon:"success",title:"Information Has Been Changed",showConfirmButton:!1,timer:1500})}})})),$(document).on("submit","#updatePassword",(function(t){t.preventDefault(),$("div[id*='error']").html("");var e=$(this);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:"updateCrediantials",method:"post",dataType:"json",data:e.serializeArray(),error:function(t,e,a){return t.responseJSON&&t.responseJSON.errors&&$.each(t.responseJSON.errors,(function(t,e){$("#"+("error-"+t)).addClass("text-danger").html(e)})),!1},success:function(t){Swal.fire({position:"top-end",icon:"success",title:"Password Has Been Changed",showConfirmButton:!1,timer:1500}),e.trigger("reset")}})})),$(document).on("submit","#addToCartProductPage",(function(t){t.preventDefault(),$("div[id*='error']").html("");var e=$(this);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:"/addToCartProductPage",method:"post",dataType:"json",data:e.serializeArray(),error:function(t,e,a){return t.responseJSON&&t.responseJSON.errors&&$.each(t.responseJSON.errors,(function(t,e){$("#"+("error-"+t)).addClass("text-danger").html(e)})),!1},success:function(t){showMessage("Product has Been Added To Cart"),loadcart()}})})),$(document).on("click","#clearCart",(function(){ajaxcall("/clearCart",{},"post",(function(t){location.reload()}))})),$(document).on("click",".slide-remove-btn",(function(){ajaxcall("/deletewishlist",{id:$(this).data("id")},"post",(function(t){"{{ url('/wishlist') }}"===currentUrl&&location.reload(),loadWishlist()}))})),$(document).on("click",".addtowish",(function(){ajaxcall("/addToWishlist",{id:$(this).data("id")},"post",(function(t){loadWishlist(),showMessage(1==t?"Product Has Been Added to WishList":"Product is already in WishList")}))})),$(document).on("click",".chngeqtypostive",(function(){var t=$(this).data("id"),e=$(this).data("index"),a=$("#row"+e).find(".quantity-input").val(),o=$("#row"+e).find("#unit").html(),n=$("#row"+e).find(".cart-subtotal").html(),r=($("#row"+e).find(".cart-subtotal").html(parseInt(n)+parseInt(o)),$("#subtotal").text());$("#subtotal").html(parseInt(r)+parseInt(o));ajaxcall("/addToCart",{id:t,qty:a},"post",(function(t){loadcart()}))})),$(document).on("click",".chngeqtynegative",(function(){var t=$(this).data("id"),e=$(this).data("index"),a=$("#row"+e).find(".quantity-input").val(),o=$("#row"+e).find("#unit").html(),n=$("#row"+e).find(".cart-subtotal").html();if(parseInt(o)!=parseInt(n)){$("#row"+e).find(".cart-subtotal").html(n-o);var r=$("#subtotal").text();$("#subtotal").html(r-o);ajaxcall("/addToCart",{id:t,qty:a},"post",(function(t){loadcart()}))}})),$(document).on("click",".deleteProduct",(function(t){t.preventDefault();ajaxcall("/removeItem",{id:$(this).data("id")},"post",(function(t){location.reload()}))})),$(document).on("click",".slide-remove-btn",(function(t){t.preventDefault();ajaxcall("/removeItem",{id:$(this).data("id")},"post",(function(t){loadcart()}))})),$(document).on("click","#AddProductToCart .quantity-btn",(function(t){return t.preventDefault(),!1})),loadcart();
